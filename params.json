{"name":"RFTM","tagline":"","body":"The RFTM is an Open Source, collaborative testing methodology that can be applied to all Radio Frequency (wireless) technologies. Throughout this methodology, we'll use various real-world wireless protocol examples\r\n\r\n[Signals and Modulation](basics.html)\r\n\r\n[Information Sources](information_sources.html)\r\n\r\n[Receiving Signals](receiving_signals.html)\r\n\r\n[Developing an FSK receiver step-by-step](fsk_receiver.html)\r\n\r\n[Developing an ASK receiver step-by-step](ask_receiver.html)\r\n\r\nTransmitting data\r\n=================\r\n\r\n\\<span style=\"color:red\"\\> **NOTE: Before transmitting any data, please fully read the [Legal considerations](https://wiki.pentest.ngs/index.php/RFTM#Legal_considerations) section** \\</span\\>\r\n\r\nRF shielding (Faraday cages)\r\n----------------------------\r\n\r\nIf you need to transmit signals on bands for which it would normally be illegal to do so e.g. Broadcast radio or 3G cellular then this can be performed within an RF-shielded environment. These come in all shapes and sizes, from small:\r\n\r\n![](images/rf_enclosure.png)\r\n\r\nto large:\r\n\r\n![](images/screened_room.jpg)\r\n\r\nDirect connection using attenuators\r\n-----------------------------------\r\n\r\nAnother approach is to directly connect your transmitter to your receiver via a cable so that no radio waves are transmitted. However, in order to do this without damaging the receiver you need to use in-line attenuators (see below) to reduce the signal level, as would occur if it was transmitted via an antenna\r\n\r\n![](images/attenuator.jpg)\r\n\r\nDeveloping a digital (FSK) transmitter step-by-step\r\n---------------------------------------------------\r\n\r\nIf you have captured some data from a target system using a receiver and you now wish to modify that data and re-transmit it (for example if you are developing an RF-based fuzzer) the following process can be followed. This transmitter is assumed to use FSK modulation (this example is actually a transmitter developed for the [io-homecontrol protocol](https://wiki.pentest.ngs/index.php/Io-homecontrol))\r\n\r\n### Data source\r\n\r\nThe assumption is that you start with a data file containing the binary data bytes you want to send\r\n\r\nCreate a new flow-graph and set the \"samp\\_rate\\_tx\" variable to 4e6\r\n\r\n![](images/tx_samp_rate.png)\r\n\r\nAdd a \"File Source\" block and set the file to be your data file. Ensure that \"Repeat\" is set to \"No\" (unless you specifically want it to repeat)\r\n\r\n### Set the Baud rate\r\n\r\nHaving received the data, you should already know what the Baud rate should be set to. Add a new \"Variable\" block called \"baud\\_rate\" and set it to the correct value.\r\n\r\n![](images/tx_baud_rate.png)\r\n\r\n### Modulation\r\n\r\nAdd a new \"Variable\" called \"sps\" (samples per symbol) and set it's value to be 10\r\n\r\n![](images/tx_sps.png)\r\n\r\nChange the default \"samp\\_rate\" \"Variable\" block to 384000 (10 x Baud rate, as we want 10 samples per symbol)\r\n\r\nAdd a \"GFSK Mod\" block, which will modulate the data using FSK. Configure the following settings:\r\n\r\n-   \"Samples/Symbol\": sps\r\n\r\n<!-- -->\r\n\r\n-   \"Sensitivity\": 1\r\n\r\n<!-- -->\r\n\r\n-   \"BT\": 1 (this will effectively remove the Gaussian filter and make it FSK rather than GFSK)\r\n\r\n![](images/tx_gfsk_mod.png)\r\n\r\nYour flow-graph should now look like this:\r\n\r\n![](images/tx_source_and_mod.png)\r\n\r\n### Resampling\r\n\r\nWe now need to match the sample rate of the data with the transmitter (as it is the final sample rate of the transmitter that will actually determine the rate that the data is transmitted).\r\n\r\nAdd a \"Rational Resampler\" block with the following settings:\r\n\r\n-   \"Interpolation\": samp\\_rate\\_tx (the output sample rate)\r\n\r\n<!-- -->\r\n\r\n-   \"Decimation\": samp\\_rate (the input sample rate)\r\n\r\n![](images/tx_resampler.png)\r\n\r\n### Adjust the signal level\r\n\r\nWe don't want to overload the input to the transmitter so we need to attenuate (reduce) the signal level.\r\n\r\nAdd a \"Multiply Const\" block and set \"Constant\" to be 0.8\r\n\r\n![](images/tx_const.png)\r\n\r\n### Configure the transmitter\r\n\r\nWe are now ready to transmit the signal.\r\n\r\nAdd a \"Variable\" block with the name \"freq\" and value equal to the transmit frequency:\r\n\r\n![](images/tx_freq.png)\r\n\r\nAdd an \"osmocom Sink\" block with the following settings:\r\n\r\n-   \"Ch0: Frequency\": freq\r\n\r\n<!-- -->\r\n\r\n-   \"Ch0: RF Gain (dB)\": 30 (can be changed as required)\r\n\r\n<!-- -->\r\n\r\n-   \"Ch0: IF Gain (dB)\": 20 (can be changed as required)\r\n\r\n<!-- -->\r\n\r\n-   \"Ch0: BB Gain (dB)\": 20 (can be changed as required)\r\n\r\n![](images/tx_tx.png)\r\n\r\nThe complete transmitter flow-graph should now look like this:\r\n\r\n![](images/iohome_tx_crop.png)\r\n\r\n### Communicating with the transmitter in real-time\r\n\r\nRather than using a file as a source you can use a \"TCP Sink\" block, bind it to a socket and send it data via TCP\r\n\r\nSignals identification\r\n======================\r\n\r\nIn order to correctly demodulate a received signal you need to be able to identify it first. This section will provide some guidance around identifying common signals.\r\n\r\nThis [website](http://www.sigidwiki.com/wiki/Signal_Identification_Guide) is a good place to start.\r\n\r\nAmplitude Shift Keying (ASK)\r\n----------------------------\r\n\r\nThe below example is the most simple form of ASK, known as On-Off Keying (OOK):\r\n\r\n![](images/ask_baudline.png)\r\n\r\nFrequency Shift Keying (FSK)\r\n----------------------------\r\n\r\nThe below example is the most simple form of FSK, known as 2-FSK or Binary FSK:\r\n\r\n![](images/fsk_baudline.png)\r\n\r\nTODO - add more stuff here\r\n\r\nLegal considerations\r\n====================\r\n\r\nUnless you hold an [Amateur Radio license](http://licensing.ofcom.org.uk/radiocommunication-licences/amateur-radio/) or have had specific training about UK law with respect to the areas of the radio frequency spectrum and at what power levels you are allowed to transmit, it is highly recommended that you restrict yourself to only receiving. The amateur radio license is fairly easy to get and a few people in the company seem to have them. Try emailing DL-Tech and you may find someone local who is willing to lend you training materials or point you in the direction of a local club.\r\n\r\nA high level overview of UK law with respect to radio transmitters can be found [here](http://stakeholders.ofcom.org.uk/enforcement/spectrum-enforcement/law)\r\n\r\nExample flow-graphs and tutorials\r\n=================================\r\n\r\nSimple FM radio receiver\r\n------------------------\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}